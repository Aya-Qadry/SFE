<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign up</title>

  <script src="/js/signup.js"></script>
  <link rel="stylesheet" href="/css/signup.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/css/signup.css">
  <script src="/js/signup.js"></script>
</head>

<body>
  <div class="container">

    <div class="card-body p-4 ">
      <h3 class="mb-2 ">Send a registration request <br>
        <small class="text">As a vendor</small>
      </h3>
    </div>

    <form th:action="@{/signup}" method="post" th:object="${request}" id="form" class="form-container">

      <div class="row">
        <div class="col-md-6 mb-4">
          <div class="form-floating">
            <input type="text" id="firstname" class="form-control form-control-lg" th:field="*{firstname}" autofocus />
            <label class="form-label" for="firstname">First name</label>
            <p th:if="${#fields.hasErrors('firstname')}" class="text-danger" th:errors="*{firstname}"></p>
          </div>
        </div>
        <div class="col-md-6 mb-4">
          <div class="form-floating">
            <input type="text" id="lastname" class="form-control form-control-lg" th:field="*{lastname}" />
            <label class="form-label" for="lastname">Last name</label>
            <p th:if="${#fields.hasErrors('lastname')}" class="text-danger" th:errors="*{lastname}"></p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-4">
          <div class="form-floating">
            <input type="text" id="cin" class="form-control form-control-lg" th:field="*{cin}" />
            <label class="form-label" for="cin">CIN</label>
            <p th:if="${#fields.hasErrors('cin')}" class="text-danger" th:errors="*{cin}"></p>
            <p th:text="${cin}" class="text-danger"></p>
          </div>
        </div>
        <div class="col-md-6 mb-4">
          <div class="form-floating mb-4">
            <input type="text" id="phonenumber" class="form-control form-control-lg" th:field="*{phonenumber}" />
            <label class="form-label" for="phonenumber">Phone number</label>
            <p th:if="${#fields.hasErrors('phonenumber')}" class="text-danger" th:errors="*{phonenumber}"></p>
            <p th:text="${phone}" class="text-danger"></p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-4">
          <!-- <label class="form-label">Gender </label> -->
          <select th:field="*{gender}" class="form-select">
            <option value="">Select a gender</option>
            <option th:value="'Male'" th:text="Male"></option>
            <option th:value="'Female'" th:text="Female"></option>
          </select>
          <p th:if="${#fields.hasErrors('gender')}" class="text-danger" th:errors="*{gender}"></p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-13 mb-4">
          <div class="form-floating mb-4">
            <input type="text" id="emailaddress" class="form-control form-control-lg" th:field="*{emailaddress}" />
            <label class="form-label" for="emailaddress">Email address</label>
            <p th:if="${#fields.hasErrors('emailaddress')}" class="text-danger" th:errors="*{emailaddress}"></p>
            <p th:text="${email}" class="text-danger"></p>
          </div>
        </div>
      </div>
      <div class="form-floating mb-4 position-relative">
        <input type="password" id="password" class="form-control form-control-lg" th:field="*{password}" />
        <label class="form-label" for="password">Password</label>
        <span class="bi bi-eye-slash position-absolute end-0 top-50 translate-middle-y" id="togglePassword"></span>
        <p th:if="${#fields.hasErrors('password')}" class="text-danger" th:errors="*{password}"></p>
      </div>
      <div class="form-floating mb-4 position-relative">
        <input type="password" id="passwordConfirm" class="form-control form-control-lg" />
        <label class="form-label" for="passwordConfirm">Password confirm</label>
        <span class="bi bi-eye-slash position-absolute end-0 top-50 translate-middle-y"
          id="togglePasswordConfirm"></span>
      </div>
      <div id="errorContainer" class="text-danger" style="display: none;"></div>

      <div class="d-flex justify-content-center">
        <button type="submit" class="btn btn-lg" id="registerButton" onclick="PasswordsMatch(event)">Send
          request</button>
      </div>
      <a th:href="@{/avonfruits/users/auth/login}">Already have an account ?</a>
    </form>
  </div>
  <script>
    const citySelect = document.getElementById("city-select");
    const url = "http://api.geonames.org/searchJSON?q=*&country=MA&maxRows=1000&username=lamar";

    // Fetch the data from the GeoNames API
    fetch(url)
      .then(response => response.json())
      .then(data => {
        // Loop through the data and add options to the select element
        data.geonames.forEach(city => {
          const option = document.createElement("option");
          option.value = city.name;
          option.textContent = city.name;
          citySelect.appendChild(option);
        });
      })
      .catch(error => console.error(error));

  </script>
</body>

</html>